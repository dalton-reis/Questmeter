{"version":3,"sources":["webpack:///./src/app/pages/aluno-atividade-abrir/aluno-atividade-abrir.module.ts","webpack:///./src/app/pages/aluno-atividade-abrir/aluno-atividade-abrir.page.html","webpack:///./src/app/pages/aluno-atividade-abrir/aluno-atividade-abrir.page.scss","webpack:///./src/app/pages/aluno-atividade-abrir/aluno-atividade-abrir.page.ts"],"names":[],"mappings":"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","file":"pages-aluno-atividade-abrir-aluno-atividade-abrir-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AlunoAtividadeAbrirPage } from './aluno-atividade-abrir.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AlunoAtividadeAbrirPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [AlunoAtividadeAbrirPage]\n})\nexport class AlunoAtividadeAbrirPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/aluno-atividade/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Atividade</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  \\n  <div padding>\\n    <ion-segment [(ngModel)]=\\\"segmentAtividade\\\" mode=\\\"ios\\\">\\n      <ion-segment-button value=\\\"edicao\\\">\\n        <ion-label>Informações</ion-label>\\n      </ion-segment-button>\\n      <ion-segment-button value=\\\"respostas\\\">\\n        <ion-label>Respostas</ion-label>\\n      </ion-segment-button>\\n    </ion-segment>\\n  </div>\\n  \\n  <div [ngSwitch]=\\\"segmentAtividade\\\">\\n    \\n    <div *ngSwitchCase=\\\"'edicao'\\\">\\n      <ion-list lines=\\\"full\\\">\\n        <ion-item *ngIf=\\\"atividade\\\">\\n          <ion-label position=\\\"stacked\\\">Nome</ion-label>\\n          <ion-input disabled=\\\"true\\\" type=\\\"text\\\" [(ngModel)]=\\\"atividade.nome\\\"></ion-input>\\n        </ion-item>\\n        <ion-item *ngIf=\\\"atividade\\\">\\n          <ion-label position=\\\"stacked\\\">Problema/Desafio</ion-label>\\n          <ion-textarea disabled=\\\"true\\\" rows=\\\"4\\\" [(ngModel)]=\\\"atividade.problema\\\"></ion-textarea>\\n        </ion-item>\\n        <ion-item *ngIf=\\\"atividade\\\">\\n          <ion-label position=\\\"stacked\\\">Termina em</ion-label>\\n          <ion-datetime disabled=\\\"true\\\" displayFormat=\\\"DD/MM/YYYY hh:mm\\\" [(ngModel)]=\\\"atividade.dataTermino\\\"></ion-datetime>\\n        </ion-item>\\n      </ion-list>\\n    </div>\\n    \\n    <div *ngSwitchCase=\\\"'respostas'\\\">\\n      <ion-list>\\n        <ion-item-sliding *ngFor=\\\"let resposta of respostas\\\">\\n          <ion-card>\\n            <ion-card-header>\\n              <ion-card-title>Votos: {{resposta.votos}}</ion-card-title>\\n            </ion-card-header>\\n            \\n            <ion-card-content>\\n              {{resposta.conteudo}}\\n            </ion-card-content>\\n            <ion-button end (click)=\\\"votar(resposta.id, resposta)\\\" *ngIf=\\\"mostraBotaoVotar\\\" style=\\\"float: right; margin-right: 2%\\\">Votar</ion-button>\\n          </ion-card>\\n        </ion-item-sliding>\\n      </ion-list>\\n    </div>\\n  </div>\\n</ion-content>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2FsdW5vLWF0aXZpZGFkZS1hYnJpci9hbHVuby1hdGl2aWRhZGUtYWJyaXIucGFnZS5zY3NzIn0= */\"","import { AlunoService } from './../../services/aluno.service';\nimport { AutenticacaoService } from './../../services/autenticacao.service';\nimport { AtividadeAlunoService } from './../../services/atividade-aluno.service';\nimport { IAtividade } from './../../models/atividade';\nimport { IResposta } from './../../models/resposta';\nimport { AtividadeService } from './../../services/atividade.service';\nimport { NavController, LoadingController } from '@ionic/angular';\nimport { ActivatedRoute } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { RespostaService } from 'src/app/services/resposta.service';\n\n@Component({\n  selector: 'app-aluno-atividade-abrir',\n  templateUrl: './aluno-atividade-abrir.page.html',\n  styleUrls: ['./aluno-atividade-abrir.page.scss'],\n})\nexport class AlunoAtividadeAbrirPage implements OnInit {\n  \n  atividade: IAtividade = {\n    nome: '',\n    professor: '', //FK\n    problema: '',\n    tipo: '',\n    dataTermino: new Date(),\n    iniciada: false,\n    codigo: ''\n  }\n  \n  usuarioCorrente = null;\n  idAtividade= null;\n  respostas: IResposta[];\n  segmentAtividade = 'edicao';\n  mostraBotaoVotar: boolean = false;\n  \n  constructor(private route: ActivatedRoute, private nav: NavController, \n    private loadingController: LoadingController,\n    private atividadeService: AtividadeService, private respostaService: RespostaService,\n    private atividadeAlunoService: AtividadeAlunoService, private alunoService: AlunoService,\n    private autenticacaoService: AutenticacaoService) { }\n    \n    ngOnInit() {\n      let codigo = this.route.snapshot.params['codigo'];\n      \n      if(codigo) {\n        this.atividadeService.getByCodigo(codigo).then((resultado) => {\n          this.idAtividade = resultado[0].id;\n          \n          if(this.idAtividade) {\n            this.load();\n            \n            this.respostaService.getByAtividade(this.idAtividade).subscribe((resultado) => {\n              this.respostas = resultado;\n            });\n          }\n        });\n      }\n    }\n    \n    async load() {\n      const loading = await this.loadingController.create({\n        message: 'Carregando'\n      });\n      await loading.present();\n      \n      this.atividadeService.get(this.idAtividade).subscribe(resultado => {\n        loading.dismiss();\n        \n        this.atividade = resultado;\n        \n        this.usuarioCorrente = this.autenticacaoService.getID();\n        this.alunoService.getByUsuario(this.usuarioCorrente).then((aluno) =>{\n          this.atividadeAlunoService.getByAtividadeAlunoVoto(this.idAtividade, aluno[0].id)\n          .subscribe((resultado) => {\n            //se já respondeu deixa o botão 'Votar' bloqueado\n            this.mostraBotaoVotar = (resultado.length > 0);\n          });\n        });\n      });\n    }\n    \n    async votar(idResposta: string, resposta: IResposta) {\n      this.usuarioCorrente = this.autenticacaoService.getID();\n      this.alunoService.getByUsuario(this.usuarioCorrente).then((aluno) =>{\n        this.atividadeAlunoService.getByAtividadeAlunoVoto(resposta.atividade, aluno[0].id)\n        .subscribe((resultado) => {\n          if (resultado.length > 0) {\n            resposta.votos++;\n            \n            this.respostaService.update(idResposta, resposta).then(() => {\n              resultado[0].alunoVotou = true;\n              resultado[0].alunoPontuacao = resposta.pontuacao;\n              \n              this.atividadeAlunoService.update(resultado[0].id, resultado[0]).then(() =>{\n\n                //VER COM O DALTON\n                // if (resposta.correta)\n                //   resposta.pontuacao += 10;\n\n                aluno[0].pontuacao += resposta.pontuacao;\n                aluno[0].nivel = Math.floor(aluno[0].pontuacao / 100);\n\n                console.log('pontuacao', aluno[0].pontuacao);\n                console.log('nivel', aluno[0].nivel);\n                \n                this.alunoService.update(aluno[0].id, aluno[0]).then(()=> {\n                  this.nav.navigateForward('/aluno-atividade-abrir/' + resposta.atividade.substring(0, 7).toUpperCase());\n                });\n              });\n            });\n          }\n        });\n      });\n    }\n  }\n  "],"sourceRoot":""}