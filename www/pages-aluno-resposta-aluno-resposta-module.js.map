{"version":3,"sources":["webpack:///./src/app/pages/aluno-resposta/aluno-resposta.module.ts","webpack:///./src/app/pages/aluno-resposta/aluno-resposta.page.html","webpack:///./src/app/pages/aluno-resposta/aluno-resposta.page.scss","webpack:///./src/app/pages/aluno-resposta/aluno-resposta.page.ts","webpack:///./src/app/services/resposta.service.ts"],"names":[],"mappings":"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","file":"pages-aluno-resposta-aluno-resposta-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { AlunoRespostaPage } from './aluno-resposta.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: AlunoRespostaPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [AlunoRespostaPage]\n})\nexport class AlunoRespostaPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"tertiary\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/aluno-atividade-abrir/\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>Resposta</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n  <ion-list lines=\\\"full\\\">\\n    <ion-item *ngIf=\\\"resposta\\\">\\n      <ion-label position=\\\"stacked\\\">Conteúdo  </ion-label>\\n      <ion-textarea disabled=\\\"true\\\" rows=\\\"3\\\" [(ngModel)]=\\\"resposta.conteudo\\\"></ion-textarea>\\n    </ion-item>\\n  </ion-list>\\n  <ion-button expand=\\\"full\\\" (click)=\\\"votar()\\\" [disabled]=\\\"desabilitaBotaoVotar\\\">Votar</ion-button>\\n</ion-content>\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL2FsdW5vLXJlc3Bvc3RhL2FsdW5vLXJlc3Bvc3RhLnBhZ2Uuc2NzcyJ9 */\"","import { TurmaAlunoService } from './../../services/turma-aluno.service';\nimport { AutenticacaoService } from './../../services/autenticacao.service';\nimport { AlunoService } from './../../services/aluno.service';\nimport { IResposta } from './../../models/resposta';\nimport { NavController, LoadingController, ToastController } from '@ionic/angular';\nimport { ActivatedRoute } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport { RespostaService } from 'src/app/services/resposta.service';\n\n@Component({\n  selector: 'app-aluno-resposta',\n  templateUrl: './aluno-resposta.page.html',\n  styleUrls: ['./aluno-resposta.page.scss'],\n})\nexport class AlunoRespostaPage implements OnInit {\n  \n  resposta: IResposta = {\n    questao: '', //FK\n    conteudo: '',\n    correta: false,\n    pontuacao: 0\n  }\n  \n  idResposta = null;\n  usuarioCorrente = null;\n  desabilitaBotaoVotar: boolean = false;\n  \n  constructor(private route: ActivatedRoute, private nav: NavController, private toastController: ToastController,\n    private loadingController: LoadingController, private respostaService: RespostaService,\n    private turmaAlunoService: TurmaAlunoService, private alunoService: AlunoService,\n    private autenticacaoService: AutenticacaoService) { }\n    \n    ngOnInit() {\n      this.idResposta = this.route.snapshot.params['id'];\n      \n      if(this.idResposta) {\n        this.load();\n      }\n    }\n    \n    async load() {\n      const loading = await this.loadingController.create({\n        message: 'Carregando'\n      });\n      await loading.present();\n      \n      this.respostaService.get(this.idResposta).subscribe(resultado => {\n        loading.dismiss();\n        \n        this.resposta = resultado;\n        \n        this.usuarioCorrente = this.autenticacaoService.getID();\n        this.alunoService.getByUsuario(this.usuarioCorrente).then((aluno) =>{\n          // this.turmaAlunoService.getByTurmaAlunoVoto(this.resposta.questao, aluno[0].id)\n          // .subscribe((resultado) => {\n          //   //se já respondeu deixa o botão 'Votar' bloqueado\n          //   this.desabilitaBotaoVotar = (resultado.length <= 0)\n          // });\n        });\n      });\n    }\n    \n    async votar() {\n      this.usuarioCorrente = this.autenticacaoService.getID();\n      this.alunoService.getByUsuario(this.usuarioCorrente).then((aluno) =>{\n        // this.turmaAlunoService.getByTurmaAlunoVoto(this.resposta.questao, aluno[0].id)\n        // .subscribe((resultado) => {\n        //   if (resultado.length > 0) {\n        //     this.resposta.votos++;\n\n        //     this.respostaService.update(this.idResposta, this.resposta).then(() => {\n        //       resultado[0].alunoVotou = true;\n        //       resultado[0].alunoPontuacao = this.resposta.pontuacao;\n\n        //       this.atividadeAlunoService.update(resultado[0].id, resultado[0]).then(() =>{\n        //         this.nav.navigateForward('/aluno-atividade-abrir/' + this.resposta.atividade.substring(0, 7).toUpperCase());\n        //       });\n        //     });\n        //   }\n        // });\n      });\n    }\n    \n    async presentToast(message: string) {\n      const toast = await this.toastController.create({\n        message: message,\n        duration: 3000,\n        position: 'bottom'\n      });\n      toast.present();\n    }\n  }\n  ","import { IAtividade } from './../models/atividade';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { AngularFirestoreCollection, AngularFirestore } from 'angularfire2/firestore';\nimport { Injectable } from '@angular/core';\nimport { IResposta } from '../models/resposta';\nimport { THIS_EXPR } from '@angular/compiler/src/output/output_ast';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RespostaService {\n  \n  private collectionRespostas: AngularFirestoreCollection<IResposta>;\n  private listRespostas: Observable<IResposta[]>;\n  \n  constructor(private db: AngularFirestore) { \n    this.collectionRespostas = db.collection<IResposta>('respostas');\n    this.listRespostas = this.collectionRespostas.snapshotChanges().pipe(\n      map(actions => {\n        return actions.map(a => {\n          const data = a.payload.doc.data();\n          const id = a.payload.doc.id;\n          return {id, ...data};\n        });\n      }));\n    }\n    \n    getAll() {\n      return this.listRespostas;\n    }\n    \n    // getByAtividade(atividade: string) {\n    \n    //   //Tentando buscar as respostas por referecia\n    //   // this.collectionRespostas.doc<IResposta>('atividades/' + atividade)\n    //   // .valueChanges().subscribe( r => console.log('resp', r));\n    \n    //   // return this.db.collection<IResposta>('respostas/atividades/' + atividade).\n    //   // snapshotChanges().pipe(\n    //   //   map(actions => {\n    //   //     return actions.map(a => {\n    //   //       const data = a.payload.doc.data();\n    //   //       const id = a.payload.doc.id;\n    //   //       return {id, ...data};\n    //   //     });\n    //   //   })\n    //   // );\n    \n    //   return this.db.collection<IResposta>('respostas', ref => ref.where('atividade', '==', atividade)).\n    //   snapshotChanges().pipe(\n    //     map(actions => {\n    //       return actions.map(a => {\n    //         const data = a.payload.doc.data();\n    //         const id = a.payload.doc.id;\n    //         return {id, ...data};\n    //       });\n    //     })\n    //   );\n    // }\n    \n    getByQuestao(questao: string) {\n      return this.db.collection<IResposta>('respostas', ref => ref.where('questao', '==', questao)).\n      snapshotChanges().pipe(\n        map(actions => {\n          return actions.map(a => {\n            const data = a.payload.doc.data();\n            const id = a.payload.doc.id;\n            return {id, ...data};\n          });\n        })\n        );\n      }\n      \n      getByQuestaoComID(questao: string) {\n        return new Promise(resolve => {\n          this.db.collection<IResposta>('respostas', ref => ref.where('questao', '==', questao)).\n          snapshotChanges().pipe(\n            map(actions => {\n              return actions.map(a => {\n                const data = a.payload.doc.data();\n                const id = a.payload.doc.id;\n                return {id, ...data};\n              });\n            })).subscribe((data:any) => {\n              resolve(data);\n            });\n          });\n        }\n        \n        get(id: string) {\n          return this.collectionRespostas.doc<IResposta>(id).valueChanges();\n        }\n        \n        add(resposta: IResposta, questao: string) {\n          //Adicionada resposta com atividade por referecia (mas nao deu pra buscar)\n          //resposta.atividade = this.db.doc('atividades/' + atividade).ref;\n          resposta.questao = questao;\n          return this.collectionRespostas.add(resposta);\n        }\n        \n        update(id: string, resposta: IResposta) {\n          return this.collectionRespostas.doc(id).update(resposta);\n        }\n        \n        remove(id: string) {\n          return this.collectionRespostas.doc(id).delete();\n        }\n      }\n      \n      "],"sourceRoot":""}